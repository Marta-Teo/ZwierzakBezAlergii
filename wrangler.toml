# Cloudflare Workers configuration for Astro SSR
# https://blog.cloudflare.com/full-stack-development-on-cloudflare-workers/
# https://docs.astro.build/en/guides/deploy/cloudflare/

name = "zwierzakbezalergii"
main = "dist/_worker.js/index.js"

# Compatibility date >= 2025-04-01 dla pełnego wsparcia Node.js
# nodejs_compat_v2 zapewnia pełną kompatybilność z Node.js API (w tym MessageChannel dla React)
compatibility_date = "2025-04-01"
compatibility_flags = ["nodejs_compat_v2"]

# Static assets configuration
# Routing is controlled by _routes.json generated by Astro
[assets]
directory = "dist"
binding = "ASSETS"

# Non-secret environment variables
[vars]
PUBLIC_APP_NAME = "ZwierzakBezAlergii"
PUBLIC_SITE_URL = "https://www.zwierzakbezalergii.pl"
PUBLIC_SUPABASE_URL = "https://bplavubvgcxdocbgrhky.supabase.co"
SUPABASE_URL = "https://bplavubvgcxdocbgrhky.supabase.co"

# SECRET variables MUST be added in Cloudflare Dashboard:
# Workers & Pages -> Your Worker -> Settings -> Variables and Secrets
# Add these secrets:
# - PUBLIC_SUPABASE_ANON_KEY (your anon key starting with eyJhbG...)
# - SUPABASE_ANON_KEY (same value as PUBLIC_SUPABASE_ANON_KEY)

